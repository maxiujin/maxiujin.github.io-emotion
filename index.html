<!DOCTYPE html>
<html>

 <meta charset="utf-8">

 <input id="humanresponse"  size="30" type="text"/>
 <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
  <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
  <img src="normalbot.gif" id ="image" width="100" height="100">

  <style type="text/css">


  </style>

<script type="text/javascript">
	var poshao =0;
	var neghao=0;
	var neuhao=0;
	  var rainy;
var posadj =["雄伟","漂亮","美丽","方便","了不起","美女","帅","高兴","心情","激动","笑","爱情","善良","聪明","帅哥","香醇","透明","晶莹","纯净","典雅","开朗","舒适","清澈","颓废","温柔","惊艳","淡漠","淡定","冷静","端庄","时尚","快乐","丰盈", "圆滑", "喜欢","满意","特别","好"];
var negadj =["紧张","忧虑","愤怒","害怕","野蛮","隐晦","阴霾","恐龙","伤心","生气","伪装","杀", "我靠", "我操", "傻逼", "哭泣","哭粗","笨","很差","丑"];

// var indiffers =["查"];

var negcounter = ["不"];
var neutralcounter =["太","非常","很"];
var doublenegative=0;
var checklength = posadj[0];
var visualalgo = document.body.appendChild(document.createElement('div'));
var visualalgo2 = document.body.appendChild(document.createElement('div2'));
       visualalgo2.style.position="absolute";
visualalgo2.style.left = 480+'px';
  visualalgo2.style.top = 40+'px';
  visualalgo2.innerHTML = '你好，请写一个句子, 然后这个A.I. 能识别你的情绪';


  $('#humanresponse').keydown(function (event) {
window.clearTimeout(rainy)
    var keypressed = event.keyCode || event.which;
    if (keypressed == 13) {
      //showbox();
      visualalgo2.innerHTML='';
       poshao =0;
	   neghao=0;
	   neuhao=0;
	   doublenegative=0;
	    visualalgo.innerHTML = '';
        //$(this).closest('form').submit();
        console.log('enter is pressed')
   emoMagic();
    }
});



function emoMagic () {

var inputs = document.getElementById('humanresponse').value;
console.log(inputs)



//positive
for(var p=0; p< posadj.length;p++) {
var compare = posadj[p];
//console.log(compare)

if (inputs.indexOf(compare)>-1) {
	
	poshao++
}


}


//negative

for(var z=0; z< negadj.length;z++) {
var compare = negadj[z];
//console.log(compare)

if (inputs.indexOf(compare)>-1) {
	neghao++
}


}



//negcounter
for(var z=0; z< inputs.length;z++) {
var compare = inputs[z];

//console.log(compare)

if (negcounter.indexOf(compare)>-1) {
	console.log("WTF")
		doublenegative++;
	//neghao++
}
}

//neutral

for(var z=0; z< neutralcounter.length;z++) {
var compare = neutralcounter[z];
//console.log(compare)

if (inputs.indexOf(compare)>-1) {
	neuhao++;
	neghao-2;
	poshao-2;
}

}




var negate=0;
if (doublenegative==1||doublenegative==3) {
	neghao++;
}
if (poshao>neghao ||doublenegative==2) {
	negate=1;
	console.log('yup',poshao)
	 
	 $(".visualalgo").addClass("rainbow-text");
       visualalgo.style.position="absolute";
visualalgo.style.left = 510+'px';
  visualalgo.style.top = 50+'px';

   //visualalgo.style.color = 'turquoise';
    rainy = setInterval(rainbow, 1000);

   function rainbow (){
  var array = ['turquoise','pink','orange','chartreuse','cyan'];
 var color =  array[Math.floor(Math.random()*array.length)];
visualalgo.style.color = color;
  visualalgo.innerHTML = '感情 = 正面';
      
   }

	document.getElementById("image").src="happybot.gif";
}

if (neghao>=poshao && neghao>=1 && negate==0) {
	negate=1;
	window.clearTimeout(rainy)
	 
       visualalgo.style.position="absolute";
visualalgo.style.left = 510+'px';
  visualalgo.style.top = 50+'px';
   visualalgo.style.color = 'red';
      visualalgo.innerHTML = '感情 = 负面';
	document.getElementById("image").src="sadcloud.gif";
}



if (neuhao>poshao&&neuhao>neghao&&negate==0) {
	window.clearTimeout(rainy)
		 
       visualalgo.style.position="absolute";
visualalgo.style.left = 510+'px';
  visualalgo.style.top = 50+'px';
   visualalgo.style.color = 'lime';
      visualalgo.innerHTML = '感情 = 中性';
	document.getElementById("image").src="normalbot.gif";
}



console.log(neuhao,neghao,poshao)




//learning algorithm 

//search new input sentence, person said it should be negative. scan sentence and then see if there are some words that already exist in your category. IF THERE are entirely new words put them in negative, if all words exist, but there is a different combination, then 

}


</script>

</html>
